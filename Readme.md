# Личный проект «Шесть городов»

* Студент: [Андрей Деев](https://up.htmlacademy.ru/nodejs-api/2/user/518707).
* Наставник: [Дмитрий Железцов](https://htmlacademy.ru/profile/sench).


# Информация по проекту

## Структура проекта

### /src

Директория с исходным кодом проекта.

### /markup

Директория с разметкой и статичными ресурсами для клиента.

### /frontend

Директория с кодом Клиента для проекта.

### /mocks

Папка с моковыми данными для генерации случайных предложений.

### /specification

Спецификация REST API проекта в формате Open API

### /dist

Итогова сборка проекта.

**Обратите внимание** папка cоздается после сборки проекта, подробнее в разделе Сценарии.


## Docker

Образы Docker для работы с проектом расположены в файле [docker-compose.yml](/docker-compose.yml)


## Сценарии

Основные сценарии, доступные для проекта.

### CLI приложения

```bash
npm run cli
```

Сценарий для запуска команд с помощью CLI. По умолчанию выводит памятку по командам CLI.

**Обратите внимание** пользоваться сценарием можно после сборки проекта с помощью `npm run build`.

### Генерация данных для БД

```bash
npm run cli:filldb
```

Сценарий запускает генерацию данных в файл .tsv и импортирует их в БД.

Сценарий объединяет в себе выполнение команд CLI `--generate` и `--import` с настройками по умолчанию.

**Обратите внимание** пользоваться сценарием можно после сборки проекта с помощью `npm run build`, а также настроив переменные окружения.

### Запуск проекта

```bash
npm start
```

Сценарий осуществляет сборку и запуск проекта на node.

Сборка осуществляется с помощью сценария `npm run build`, директория проекта `/dist`.

### Запуск проекта в режиме разработки

```bash
npm run start:dev
```

Сценарий запускает проект в режиме разработки, используя исходный код проекта на TypeScript с помощью пакета [ts-node](https://www.npmjs.com/package/ts-node).

При сохранении исходных файлов, проект перезапускается. Отслеживание изменений с помощью пакета [nodemon](https://www.npmjs.com/package/nodemon).

### Запуск сервера с моковыми данными

```bash
npm run mock:server
```

Запуск [json-server](https://www.npmjs.com/package/json-server) с моковыми данными, которые используются для генерации случайных предложений.

Данные для сервера расположены в директории `/mocks`

### Сборка проекта

```bash
npm run build
```

Сценарий запуска сборки проекта.

Объединяет в себе сценарии `npm run clean` и `npm run compile`.

### Компиляция проекта

```bash
npm run compile
```

Сценарий сборки проекта в директорию `/dist`. Копиляция файлов на основе настроек `tsconfig.json`

### Очистка директории проекта

```bash
npm run clean
```

Сценарий очистки директроии `/dist` проекта

### Проверка линтером

```bash
npm run lint
```

Запуск проверки проекта с помощью `ESLint`.

Проверка производится в файлах директории `src` с расширением `.ts`.

## Переменные окружения

Для запуска проекта необходимо задать необходимые переменные окружения.

Примеры также расположены в директории проекта в файле `.env.example`.

**Важно:** в случае отсутствия значений у переменных окружения, приложение выдаст ошибку и завершит работу. Для некоторых переменных указаны значения по-умолчанию.

### HOST=localhost

Имя хоста, на котором запускается проект.

Тип поля - `строка`

Значение по умолчанию - `localhost`

### PORT=4000

Порт, на котором запускается проект

Тип поля - `число`

значение по умолчанию - `4000`

### SALT=unknownsalt

Строка для кодирования пароля (соль)

Тип данных - `строка`

Значение по умолчанию - `отсутствует`

### DB_HOST=127.0.0.1 

IP-адрес для сервера с базой данных (MongoDB)

Тип данных - `строка`

Значение по умолчанию - `127.0.0.1`

### DB_USER=admin

Имя пользователя с правами администратора БД.

Тип данных - `строка`

Значение по умолчанию - `отсутствует`

### DB_PASSWORD=test

Пароль пользователя с правами администратора БД.

Тип данных - `строка`

Значение по умолчанию - `отсутствует`

### DB_PORT=27017

Порт для подключения к БД.

Тип поля - `число`

значение по умолчанию - `27017`

### DB_NAME=six-cities-db

Имя базы данных проекта

Тип поля - `строка`

значение по умолчанию - `six-cities-db`

### UPLOAD_DIRECTORY=./upload

Директория для загрузки файлов от Пользователя

Тип данных - `строка`

Значение по умолчанию - `отсутствует`

### STATIC_DIRECTORY_PATH=./static

Путь к директории со статичными ресурсами.

Тип данных - `строка`

Значение по умолчанию - `./static`

### JWT_SECRET=secretkey

Ключ для подписи JWT

Тип данных - `строка`

Значение по умолчанию - `отсутствует`
